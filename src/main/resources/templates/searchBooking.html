<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Adventure XP - Forside</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/img/adventure-logo.svg" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link rel="stylesheet" th:href="@{css/styles.css}">
</head>
<body id="page-top">
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
    <div class="container">
        <a class="navbar-brand" href="/"><img src="assets/img/adventure-logo.svg" alt="..." style="height: 100px;"/></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars ms-1"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                <li class="nav-item"><a class="nav-link" href="/">Forside</a></li>
            </ul>
        </div>
    </div>
</nav>
<!-- Masthead-->
<!-- Activity Grid-->
<section class="page-section bg-light" id="portfolio">
    <div class="container">
        <div class="text-center">
            <h2 class="section-heading text-uppercase">Søg Booking</h2>
            <h3 class="section-subheading text-muted">Indtast søge kriterier for filtreret liste</h3>
        </div>
        <div>
            <form action="/searchBooking" method="post">
                <input type="text" placeholder="Booking ID" name="bookingID"}/>
                <input type="text" placeholder="Aktivitets ID" name="activityID"}/>
                <input type="text" placeholder="Aktivitets navn" name="activityName"}/><br>
                <input type="text" placeholder="Medarbejder navn" name="employeeName"}/>
                <input type="text" placeholder="Kunde navn" name="customerName"}/><br>
                <input type="text" placeholder="Kunde tlf" name="customerPhoneNumber"/>
                <input type="text" placeholder="Dato" name="startDate"/>
                <input type="text" placeholder="Dato fra" name="dateFrom"/><br>
                <input type="text" placeholder="Dato til" name="dateTo"}/>
                <button type="submit">Søg</button>
            </form>
            <br>
            <input type="text" id="user-input" onkeyup="userSearch()" placeholder="Søg efter: BookingID, aktivitet, medarbejder, kundenavn, tlf. nr eller dato">

            <table class="table table-dark" id="receipt-table">
                <thead>
                <tr>
                    <th>Booking ID</th>
                    <th>Aktivitet</th>
                    <th>Medarbejder</th>
                    <th>Kundenavn</th>
                    <th>Kunde tlf</th>
                    <th>Dato</th>
                    <th>Tid</th>
                    <th>Rediger</th>
                    <th>Slet</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="bookingList: ${bookingList}">
                    <td th:text="${bookingList.bookingId}" />
                    <td th:text="${bookingList.activityName}" />
                    <td th:text="${bookingList.employeeName}" />
                    <td th:text="${bookingList.customerName}" />
                    <td th:text="${bookingList.customerTelephone}" />
                    <td th:text="${bookingList.startDate}" />
                    <td th:text="${bookingList.timeStart}" />
                    <td>
                        <a th:href="@{'/updateBooking/' + ${bookingList.bookingId}}">
                            <button type="button" class="btn btn-primary">Rediger</button>
                        </a>
                    </td>
                    <td>
                        <a th:href="@{'/deleteBooking/' + ${bookingList.bookingId}}">
                            <button type="button" class="btn btn-primary">Slet</button>
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>
<!-- Footer-->
<footer class="footer py-4">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-4 text-lg-start">Copyright &copy; AdventureXP 2021</div>
            <div class="col-lg-4 my-3 my-lg-0">
                <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a class="link-dark text-decoration-none me-3" href="#!">Privacy Policy</a>
                <a class="link-dark text-decoration-none" href="#!">Terms of Use</a>
            </div>
        </div>
    </div>>
</footer>

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="js/scripts.js"></script>
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<!-- * *                               SB Forms JS                               * *-->
<!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>

<!--search funktion, filtrer tabel ud fra user-input-->
<!--Input er brugerens input, filter tjekker textContent, og fjerner row hvis i input ikke passer med søgning-->
<!--td, td1 osv. Er de columns man kan søge på, hvor [i] er column nummerering-->
<!--Vi har fået metoeden fra https://www.w3schools.com/howto/howto_js_filter_table.asp og har ændret den, så det passer med vores tabel-->
<script>
    function userSearch() {
        var input, filter, table, tr, td, td1, td2, td3, td4,td5, i;
        input = document.getElementById("user-input");
        filter = input.value.toUpperCase();
        table = document.getElementById("receipt-table");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) { <!--tjekker hver td og om de skal kunne filtreres ud fra -->
        td = tr[i].getElementsByTagName("td")[0];
            td1 = tr[i].getElementsByTagName("td")[1];
            td2 = tr[i].getElementsByTagName("td")[2];
            td3 = tr[i].getElementsByTagName("td")[3];
            td4 = tr[i].getElementsByTagName("td")[4];
            td5 = tr[i].getElementsByTagName("td")[5];
            td6 = tr[i].getElementsByTagName("td")[6];
            if (td) {
                if ( (td.textContent.toUpperCase().indexOf(filter) > -1) ||
                    (td1.textContent.toUpperCase().indexOf(filter) > -1) ||
                    (td2.textContent.toUpperCase().indexOf(filter) > -1) ||
                    (td3.textContent.toUpperCase().indexOf(filter) > -1) ||
                    (td4.textContent.toUpperCase().indexOf(filter) > -1) ||
                    (td5.textContent.toUpperCase().indexOf(filter) > -1) ||
                    (td6.textContent.toUpperCase().indexOf(filter) > -1))  {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
</script>

</body>
</html>
